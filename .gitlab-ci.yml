stages:
  - test
  - deploy

variables:
  BASE_URL: "https://api.meteo.cat"

test_job:
  stage: test
  image: python:3.9
  script:
    - pip install -r requirements.txt
    - python locations.py  # Ejecuta tu script principal
  artifacts:
    paths:
      - municipis_result.json  # Archivo que queremos guardar
    expire_in: 1 week  # Opcional: Configura cu치nto tiempo estar치 disponible el archivo
  only:
    - main

deploy_job:
  stage: deploy
  image: python:3.9
  script:
    - echo "Desplegando la aplicaci칩n..."
    - python deploy.py  # Reemplaza con tu l칩gica de despliegue
  only:
    - tags
